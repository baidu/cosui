# 协议选型
Cosui 提供两套语义化接口协议：**Markdown 扩展协议**（流式叙事/富文本）与 **JSON 协议**（结构化视图/组件描述）。二者互补而非对立，均可承载结构化与交互能力，面向不同生成与落地形态的 UI。

## 协议选型与关系

**流式交互层 [(Markdown 扩展协议)](/protocol/markdown/content/index)**
 * **定位**：叙事/流式优先的协议，原生富文本并通过 Directive 提供结构化扩展。
* **结构化扩展**：通过 `:ml-` / `::ml-` / `:::ml-` 指令封装组件与数据，支持嵌入结构化 JSON（`:::ml-data`），可覆盖复杂交互。
* **Streaming 友好**：支持字符级/分段 SSE 增量渲染，适合 LLM 流式输出。
* **当前应用**：生成式场景中的线性叙事流、图文混排、标准组件调用。

**结构化视图层 [(JSON 协议)](/protocol/json/content/index)**
* **定位**：结构化的组件描述协议，UI Schema + Data Model 描述视图、数据、事件与逻辑。
 * **能力补充**：内置插值 `{{}}`、条件 `if`、循环 `for`、事件/动作映射，原子组件自由组合，支持 `type: "markdown"` 节点直接复用 Markdown 扩展协议，实现富文本与结构化视图的融合。
* **Streaming 友好**：支持流式增量（如 SSE 分段）、插值与数据/行为分离，降低 Token 消耗并控制幻觉。
* **当前应用**：对话式结果页、需要精细布局与多状态联动的界面。

> 选择原则：二者无对错或取舍之分。Markdown 强于叙事与流式体验，JSON 强于精细布局与可组合性；两者可互相嵌套（JSON 节点可渲染 Markdown，Markdown 指令可挂载结构化数据与组件），按场景选择，需要混用时先划清边界再组合。

## 应用场景参考
* Markdown 扩展协议：线性叙事流、流式生成、图文混排、标准组件快速调用。
* JSON 协议：高精度布局、复杂表单/多状态联动、对话式、需要显式逻辑控制的界面。