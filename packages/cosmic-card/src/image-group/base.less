/*
 * Copyright (c) Baidu, Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@import 'variable.less';
@import (reference) 'tokens.less';

.image-ratio(@width, @height) {
    .cos-image {
        overflow: hidden;
        padding-bottom: (@height / @width) * 100%;
        height: 0;
    }
}

.@{prefix}-image-group {
    .cos-image,
    .cos-image:before {
        .cos-rounded-none();
    }
    .cos-row {
        &:not(:first-child) {
            margin-top: 2px;
        }
    }
    &-1-1 {
        .image-ratio(1, 1);
    }

    &-3-2 {
        .image-ratio(3, 2);
    }

    &-3-4 {
        .image-ratio(3, 4);
    }
    &-4-3 {
        .image-ratio(4, 3);
    }
}

.@{prefix}-image-group-scrollable {
    position: relative;
    padding-bottom: (9/19) * 100%;
    &-swiper {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        .cos-swiper-content {
            height: 100%;
            .cos-rounded-none();
        }
        .cos-swiper-list {
            padding: var(--cos-space-none) var(--cos-space-none) 30px;
            height: 100%;
        }
        & &-image {
            overflow: hidden;
            .cos-rounded-sm();
            cursor: auto;
            width: 100%;
            height: 100%;
            &:active::after {
                content: "";
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                background-color: rgba(0, 0, 0, 0.04);
            }
            &::before {
                .cos-rounded-xl();
            }
        }
    }
}

:not(.cosc-image-group-main).@{prefix}-image-group {
    .cos-row {
        // 第一行
        &:first-child {
            .@{prefix}-image-group-item {
                // 第一行的第一个图片
                &:first-child .cos-image {
                    border-top-left-radius: var(--cos-rounded-sm);
                    &:before {
                        border-top-left-radius: var(--cos-rounded-xl);
                    }
                }
                // 第一行的最后一个图片
                &:last-child .cos-image {
                    border-top-right-radius: var(--cos-rounded-sm);
                    &:before {
                        border-top-right-radius: var(--cos-rounded-xl);
                    }
                }
            }
        }
        // 最后一行
        &:last-child {
            .@{prefix}-image-group-item {
                // 最后一行的第一个图片
                &:first-child .cos-image {
                    border-bottom-left-radius: var(--cos-rounded-sm);
                    &:before {
                        border-bottom-left-radius: var(--cos-rounded-xl);
                    }
                }
                // 最后一行的最后一个图片，且位于图集边缘
                &:last-child .cos-image:not(.@{prefix}-image-group-middle) {
                    border-bottom-right-radius: var(--cos-rounded-sm);
                    &:before {
                        border-bottom-right-radius: var(--cos-rounded-xl);
                    }
                }
            }
        }

        .@{prefix}-image-group-item {
            &:not(:last-child) {
                .cos-image-7-9 {
                    width: calc(100% - 1px);
                }
            }
        }
    }
}

.@{prefix}-image-group-main {
    &.cos-image-3-1 .cos-col-6:last-child .cos-gutter {
        padding-left: 1px;
    }

    > .@{prefix}-image-group-item:first-child {
        .cos-space-pr-none();

        .cos-image-14-9 {
            width: calc(100% - 1px);
        }
    }
     >:nth-child(1) {
        .cos-image {
            border-top-left-radius: var(--cos-rounded-sm);
            border-bottom-left-radius: var(--cos-rounded-sm);
            &:before {
                border-top-left-radius: var(--cos-rounded-xl);
                border-bottom-left-radius: var(--cos-rounded-xl);
            }
        }
     }
    >:last-child {
        .cos-row {
            &:first-child {
                .@{prefix}-image-group-item {
                    &:last-child .cos-image {
                        border-top-right-radius: var(--cos-rounded-sm);
                        &:before {
                            border-top-right-radius: var(--cos-rounded-xl);
                        }
                    }
                }

            }
            &:last-child {
                .@{prefix}-image-group-item {
                    &:last-child .cos-image {
                        border-bottom-right-radius: var(--cos-rounded-sm);
                        &:before {
                            border-bottom-right-radius: var(--cos-rounded-xl);
                        }
                    }
                }

            }
        }
    }
}