/*
 * Copyright (c) Baidu, Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@import 'variable.less';
@import (reference) 'tokens.less';

.@{prefix}-vote {
    &-options {
        width: 100%;
    }
    &-option {
        cursor: pointer;
        &-image {
            .cos-shrink-0();
            z-index: 1;
            .cos-space-mr-xxs();
        }
        &-name {
            .cos-line-clamp-1();
            z-index: 1;
            .cos-inline-block();
            max-width: 100%;
        }
    }
    &-results {
        width: 100%;
    }
    &-1v1 {
        .@{prefix}-vote {
            &-options {
                position: relative;
                .cos-flex();
                overflow: hidden;
                height: 36px;
                .cos-rounded-xl();
                background: linear-gradient(102deg, #772eff 0%, #0064ff 50%, #ff3162 50%, #ff7c50 100%);
            }
            &-option {
                position: relative;
                .cos-flex-1();
                .cos-flex();
                .cos-justify-center();
                .cos-items-center();
                overflow: hidden;
                font-size: var(--cos-text-body);
                .cos-space-mr-sm();
                .cos-space-ml-sm();
                &-name {
                    .cos-color-text-on-warning();
                }
            }
            &-target-left {
                .cos-space-pr-sm();
            }
            &-target-right {
                .cos-space-pl-sm();
            }
            &-vs {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 44px;
                height: 36px;
                .cos-flex();
                .cos-justify-center();
                .cos-items-center();
            }
            &-results {
                position: relative;
                .cos-flex();
                overflow: hidden;
                .cos-flex-col();
                .cos-opacity-0();
                animation: fadeIn .16s ease-out forwards;
                .@{prefix}-vote-target-left {
                    .cos-color-text-primary();
                }
                .@{prefix}-vote-target-right {
                    .cos-color-text-error();
                }
            }
            &-result {
                &-bar {
                    position: relative;
                    .cos-flex();
                    .cos-justify-between();
                    overflow: hidden;
                    .cos-rounded-full();
                    width: 100%;
                    height: 17px;
                    .cos-space-mb-xs();

                    &-slash {
                        flex: 1;
                    }
                    &-item {
                        transform: scaleX(0);
                        animation: expandScaleX .48s ease-in forwards;
                        position: absolute;
                        height: 17px;
                    }
                    &-left {
                        left: 0;
                        background: linear-gradient(135deg, #772eff, #0064ff calc(100% - 13px), transparent calc(100% - 13px));
                        transform-origin: left;
                    }

                    &-right {
                        right: 0;
                        background: linear-gradient(135deg,transparent,transparent 12px,#ff7c50 12px,#ff3162);
                        transform-origin: right;
                    }
                }
                &-targets {
                    .cos-flex();
                    .cos-justify-between();
                    width: 100%;
                    font-size: var(--cos-text-body-lg);
                }
                &-target {
                    .cos-flex();
                    .cos-items-center();
                    overflow: hidden;
                    .cos-flex-1();
                    &.@{prefix}-vote-target-right{
                        .cos-flex-row-reverse();
                    }
                }
                &-value {
                    overflow: visible;
                    font-size: var(--cos-text-subtitle);
                    white-space: nowrap;
                    .cos-font-number-medium();
                }

                &-name {
                    .cos-line-clamp-1();
                    font-size: var(--cos-text-subtitle-sm);
                }
            }
        }
    }
    &-horizontal {
        .@{prefix}-vote {
            &-options {
                position: relative;
                .cos-flex();
                height: 36px;
                .cos-flex-nowrap();
            }
            &-option {
                .cos-flex();
                .cos-justify-center();
                .cos-items-center();
                z-index: 1;
                overflow: hidden;
                flex: 1;
                .cos-space-mr-xs();
                .cos-rounded-full();
                padding: var(--cos-space-xxs) var(--cos-space-xs);
                width: 100%;
                font-size: var(--cos-text-body);
                white-space: nowrap;
                .cos-color-text-primary();
                .cos-color-bg-dent();
                transition: color .4s ease-out;
                &:last-child {
                    .cos-space-mr-none();
                }
            }
        }
    }
    &-vertical {
        .@{prefix}-vote {
            &-options {
                .cos-flex();
                .cos-flex-col();
                height: unset;
            }
            &-option {
                .cos-flex();
                .cos-justify-center();
                .cos-items-center();
                z-index: 1;
                overflow: hidden;
                .cos-space-mb-xs();
                .cos-rounded-full();
                padding: var(--cos-space-xxs) var(--cos-space-xl);
                width: 100%;
                height: 36px;
                font-size: var(--cos-text-body);
                white-space: nowrap;
                box-sizing: border-box;
                .cos-color-text-primary();
                .cos-color-bg-dent();
                transition: color .4s ease-out;
                &:last-child {
                    .cos-space-mb-none();
                }
            }
        }
    }
    &-results-list{
        &.@{prefix}-vote-options {
            .cos-flex();
            .cos-flex-col();
            height: unset;
        }
        .@{prefix}-vote {
            &-option {
                position: relative;
                .cos-space-m-none();
                .cos-space-mb-xs();
                padding: var(--cos-space-xxs) 60px var(--cos-space-xxs) var(--cos-space-sm);
                height: 36px;
                .cos-flex-none();
                box-sizing: border-box;
                .cos-justify-start();
                .cos-color-text();
                &:last-child {
                    .cos-space-mb-none();
                }
                &-placeholder {
                    position: relative;
                    z-index: 1;
                    animation: expandWidth .4s ease-out forwards;
                    .cos-space-ml-sm();
                    max-width: 19px;
                }
                &-result-bar {
                    position: absolute;
                    top: 0;
                    left: 0;
                    height: 100%;
                    // 无对应 token, 借用 border 色值
                    background-color: var(--cos-color-border-minor);
                    transform: scaleX(0);
                    transform-origin: left;
                    animation: expandScaleX .4s ease-out forwards;
                }
                &-result-value {
                    position: absolute;
                    top: 50%;
                    right: 20px;
                    z-index: 1;
                    font-size: var(--cos-text-body);
                    transform: translateY(-50%);
                    .cos-font-number-medium();
                }
                &-target-icon {
                    overflow: hidden;
                    width: 0;
                    font-size: var(--cos-text-subtitle);
                    animation: expandWidth .12s ease-in-out .4s forwards;
                }
            }
            &-target {
                .cos-font-medium();
                .cos-color-text-on-primary-light();

                .@{prefix}-vote-option-result-bar {
                    .cos-color-bg-primary-light();
                }
            }
        }
    }
}

@media (prefers-color-scheme: dark) {
    @{t7-kernel-selectors} {
        .@{prefix}-vote-results-list {
            .@{prefix}-vote {
                &-option-result-bar {
                    background-color: #d2d2d2;
                }

                &-target {
                    .@{prefix}-vote-option-result-bar {
                        .cos-color-bg-primary-light();
                    }
                }
            }
        }
    }
}

@keyframes fadeIn {
    from {
        .cos-opacity-0();
    }
    to {
        .cos-opacity-100();
    }
}

@keyframes expandScaleX {
    from {
        transform: scaleX(0);
    }
    to {
        transform: scaleX(1);
    }
}

@keyframes expandWidth {
    from {
        width: 0;
    }
    to {
        width: 100%;
    }
}
