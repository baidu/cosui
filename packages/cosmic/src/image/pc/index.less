/*
 * Copyright (c) Baidu, Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@import 'variable.less';
@import (reference) 'tokens.less';

.image-ratio(@width, @height) {
    overflow: hidden;
    padding-bottom: (@height / @width) * 100%;
    height: 0;
}

.background-size(@size) {
    .@{prefix}-image-background {
        .cos-block();
        background-size: @size;
    }
    .@{prefix}-image-body {
        .cos-hidden();
    }
}

.background-position(@position) {
    .@{prefix}-image-background {
        .cos-block();
        background-position: @position;
    }
    .@{prefix}-image-body {
        .cos-hidden();
    }
}

.@{prefix}-image {
    position: relative;
    overflow: hidden;
    .cos-rounded-sm();
    // 解决 div 和 img 标签有间隙的问题
    .cos-leading-0();
    cursor: pointer;

    &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        z-index: 2;
        // FIXME: 待 token 更新后可替换为 var(--cos-color-border-tiny);
        border: 1px solid #dcdde04d;
        .cos-rounded-xl();
        width: 200%;
        height: 200%;
        transform-origin: 0 0;
        // 缩放后微调边框位置
        transform: scale(.5) translate(-.25px, -.25px);
        box-sizing: border-box;
        pointer-events:none;
    }

    &-placeholder,
    &-background,
    &-content {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }

    &-content {
        z-index: 1;
        .cos-leading-none();
    }

    &-placeholder {
        .cos-flex();
        .cos-justify-center();
        .cos-items-center();
        .cos-image-color-bg-placeholder();
        .cos-icon-baidu {
            font-size: 29px;
            color: #ddd;
        }
    }

    &-background {
        .cos-hidden();
        background-repeat: no-repeat;
        background-color: transparent;
    }

    &-body {
        position: relative;
        width: 100%;
    }

    &-1-1 {
        .image-ratio(1, 1);
    }

    &-3-1 {
        .image-ratio(3, 1);
    }

    &-3-2 {
        .image-ratio(3, 2);
    }

    &-3-4 {
        .image-ratio(3, 4);
    }

    &-4-3 {
        .image-ratio(4, 3);
    }

    &-5-1 {
        .image-ratio(5, 1);
    }

    &-5-2 {
        .image-ratio(5, 2);
    }

    &-16-9  {
        .image-ratio(16, 9);
    }

    // 屏效统一，图片外层容器设置 7:3
    &-7-3 {
        .image-ratio(7, 3);
    }

    // 外层 7:3，栅格 4n:4n:4n，每张图 7:9
    &-7-9 {
        .image-ratio(7, 9);
    }

    // 外层 7:3，栅格 8n:4n，每张图 14:9
    &-14-9 {
        .image-ratio(14, 9);
    }

    &-fit-fill {
        .background-size(100% 100%);
    }

    &-fit-contain {
        .background-size(contain);

        // 背景图片居中显示，对齐 object-fit：contain 的效果
        .cos-image-background {
            background-position: center;
        }
    }

    &-fit-cover {
        .background-size(cover);

        // 背景图片居中显示，对齐 object-fit：cover 的效果
        .cos-image-background {
            background-position: center;
        }
    }

    &-position-center {
        .background-position(center);
    }

    &-position-top {
        .background-position(top center);
    }

    &-position-right {
        .background-position(center right);
    }

    &-position-bottom {
        .background-position(bottom center);
    }

    &-position-left {
        .background-position(center left);
    }

    &-hover {
        transform: translate3d(0, 0, 0);

        .@{prefix}-image-background, .@{prefix}-image-body {
            transition: all 0.3s;
        }

        &:hover {
            .@{prefix}-image-background, .@{prefix}-image-body {
                transform: scale(1.1);
            }
        }
    }
}
