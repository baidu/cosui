/*
 * Copyright (c) Baidu, Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

.cos-row {
    display: flex;

    &.cos-gutter {
        margin-right: -.5 * @gutter;
        margin-right: calc(-.5 * var(--cos-grid-gutter));
        margin-left: -.5 * @gutter;
        margin-left: calc(-.5 * var(--cos-grid-gutter));
    }
}

.cos-col {
    box-sizing: border-box;
    flex: 1 1 0;
}

.make-col(@total, @index: 1) when (@index =< @total) {
    .cos-col-@{index} {
        box-sizing: border-box;
        flex: 0 0 auto;
        width: percentage((@index / @total));
    }
    .make-col(@total, (@index + 1));
}

.make-col(@total-cols, 1);

.make-gutter(@gutter: @gutter, @gutter-css: --cos-grid-gutter) {
    .cos-col,
    .cos-col-1,
    .cos-col-2,
    .cos-col-3,
    .cos-col-4,
    .cos-col-5,
    .cos-col-6,
    .cos-col-7,
    .cos-col-8,
    .cos-col-9,
    .cos-col-10,
    .cos-col-11,
    .cos-col-12 {
        padding-right: .5 * @gutter;
        padding-right: calc(.5 * var(@gutter-css));
        padding-left: .5 * @gutter;
        padding-left: calc(.5 * var(@gutter-css));
    }
}

.cos-gutter {
    .make-gutter(@gutter, --cos-grid-gutter);
}

.make-col-in-row-col(@total, @index: 1) when (@index =< @total) {
    > .cos-col-@{index} {
        flex: 0 0 auto;
        width: percentage((@index / @total));
    }
    .make-col-in-row-col(@total, (@index + 1));
}

.make-row-col(@total, @index: 1) when (@index =< @total) {
    .cos-row-col-@{index} {
        > .cos-col {
            flex: 0 0 auto;
            width: percentage((1 / @index));
        }

        .make-col-in-row-col(@index, 1);
    }
    .make-row-col(@total, (@index + 1));
}

.make-row-col(@total-cols, 1);

.cos-row-col-auto {
    > * {
        flex: 0 0 auto;
        width: auto;
    }
}